# Automatically generated on 2020-10-10 UTC from https://codemagic.io/app/5f81be80da6060a31cad8325/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        CM_KEYSTORE: Encrypted(Z0FBQUFBQmZnZjNqN1M3bWMyM3B6dGVlaGJWRFhoeDZHSGtTMU05TWhNWk5PVXpCVVEzQ2dzQmpXMVlRRjhYQnE4QlFnMlUyRTRpUzlNc203UTByTDlJQXV1Uk5tVnp4NEJ1NnhndEtHeHJMZU1paGlZSDZXXzhtUldIWkdyNnBmQ0VmcmZsVEhRbEFSVFBsYVJyTWtVdzZna1VsWm1NQmF4WGtXeERFSWpJX0l6RHBLVWRPOWU0Wk9jVlp0ckFxLU1qSGdlTUdwSjZCM2RFQjdLeXp6R09DWU03NS1WeFljYlh2VmQ5YVJGTVdKYjlVTkNzc0s4emMyMTZGbzR0WGVEYTVxbkN2cGozM0hyN0V5T2h0WnIyUnpmMmtEaDNKdE1wYXFWVGpqM0twbUJnMVRNN1I5V0hpQnJQTW92QTFVd1F4c2l2X2JsR0R0OHZ1MFQzY2UwSlJDMndfU2NVQVZRQjA3TkhzN0Y3Ty02ZGQzX25uSW1Selo3Y3JPendCcVZIRXA5V1c4bkNXT1Q4UmljbEtPemlhT1lZVkdWRDVwSXFhVFNFMnI0U19Wc0dsckpTOVM4UTdmX2RsZkdhWjB6azY4NF9LTFVZcDU2Z1VVTVhXeThTNDZEVGpERG5KaGRXZHoxTmZXT1lpR2NNNjRDN1JJWFRJZ0dNQ2RmWk9KN29yNGI0Vko1ZHE1U1VEZ29yQkZmWk04WVhGSURsSFRzQk1kczBlZHVjeWxDcUtCR2dYdG1MczFOZUhNQlpvbGM0ZTJQa3dxLVdmUG9MZW8xTFpFck1mOTFhRlJUQm51LVJLalFyaXFSYUp2eHhveFc5dVBJSnVsc1Zzb1FMQ3R4V01HUmd2S1JJRFh4OVJSMHk2SVhQSDY4ZGRET0pqeDhjVXVaVFZJM1F6NC12UTR5UUU4c2xfSTdlcE4yTTRHV1QtOExXZ0JhWUpPVlJrNVJwUk95akI3eWVEd2pXclR5bVZoTFgxUXdCZERLOTNOQjBmVDF1VlFiN0FHRnVrc01NLUQ4S1BaVHl4aEwzTE5LS1FzNVF5bEM2X2Fsa0wyYzFrQW8wREc2VGVrbjJTcTh5RXQ1c3kycmtFT3ZpWkJ1bVhCWGp4YzJVMTc1WHQ4TGdNdWROajZhVVBrME5oYS04SXp0T0RFQnpoWktVcGhFNjdXMGpzdTNGVElkUklhREFfMGlFYlc0Q1dGVkN1eXdyZ0RibFRkNkJ4QkFBVk40aDV0OWZXODZWbklXcGZ2aFlya1Bqb21ZUk1iZnJfLVlMaDNBelphQjk3MFRDSDhBM2taNENPNmhvdUk0TWVZTlRIUHVsZ3MwTTY3Y292OW1neTRrdVVGTEdjQ1pDRXB3TmRRRl9vLTFuYnBHdGVKQzZRMGVJSUUtd25mVVRUamw3dllSQjUtMXdiT00yVkMtV1VjbEd5aXNrY3hDRGZqTGZVNHB6THQ3cDZ6U3gtYUNteFlhT01kaHVPZkdVSWFaXzlleHJnVGhwZVhfM09kSGxQVWY0NHlVTkNzYVZzNkJMc1FnQl9kUkZWLUhSZ1NwMko3SjJycFpzazRQanZrckRVT0FwQzhnLXZZbnl1ZkttTS1pN3JZdXZ1Nkhjb25Ha1pNRnpDYi1US2dreWlaRGhTNmJWZkRMV2h3X1J2TEk0NVdpdXBwSWN4amxmcFdNUXdUbTN6SjNpb1VJQWJxZGtpTkhtT2FLUmR4RklIYXdKb3RFMDhyRTg5MHF3V0tTWUhIRmVWVkpWWnhfUGRDbEhLSm9fanhiVGE5aTNtOXpwaDJZSFhUSG9CSzZTUWZWSXpqa0ZUOENrR3ktYl9pT1I0RmZLcmxrelBmVnloRVVPQnZtOVNicElTOXJ2MlZXektUYUMxMWE3YWZRckRielJDOW9Ba1JweW02WmpRUXYtMlJmSDJPYlNHSnBYamRERnMtaWJTbEJvYTVIcmVGTDJwUjdWN0RmYllKNHhSUkQwaGc0SUg3UmNrS1M4S2tJaEtwSjU5Rl92VURxY2FrZlk1Z2lOczAwUzZLWmZCRXZkT0d3dWExcjBCUmZNaHVweVBSek5RWjgxY1IwWUJlSkhOc2F1aDQ2cjVoakh5eEJlaE00ZkR3WjA1amVYUURfMGFnRXpuOWQydmFRNDgwR0RKUHRweTI5WXYxMHJueGVlcVBFQjM3TjgtTHRtRi13MlhUY2NyV0lxdFJaT0pMZUk0MmRhVmVPSzNsQUphdmpsdTduM1g3Y3hPcTJGNE5rZUhqdHNoRHpBV0h2TU9rNGlIVUNCdzhPSnVQVDJxRUdWYkZWcFFLRzB1Mm5pNFhKd3N2QjEyOGZuN3JhZUtNdnB3eS1VZXp2czB2dFhlX2sxdUFRUFB3WnBkVVBWUXB0UjRlRUFZbnMzVUhHbXZ2MnVQMFI0QTdmNi1Ta2ZpT2tiTFllU2hDeXI1XzhtbXVZSUZlYVA3blhSQW1pTXdyT2lnc2k5R3lkTEhjTTRiZjUyT3FZVzM2cEJsTDZSeUxESnlSMUhsZTBtQjRaY0VjTjhnOC1LbDg5QU5xeUVSMHVRZ3dGRzlJUnRJeXdDbW9wYTdZNDFLN01OcjhQSGpRbTJIZkxSa1dxc3pUYkdmT2ZCX2dmaTFSQ3lSUEpXaVk0ZGV2UmNHWTE4VzN4QkxBZVQyRDA0OWZpM3ppN19VcXBWa051THZ6OGpNUTlNTjBXdDRNY0RQWGgyOFB0S2VmdGxYY0N5YVpDVlhGZGk3cnZDRlNnLWxidjctVU0zbE4xWnVyeEVfeW1OZ01PYmo1UHdjdVV1X1lRbUJmSHdLX2kwUmxBNTRtMzJFTkJzMTNQblcwQ3RkYkZuTnRRZHNPLWRMU01ORk85cW9qZlBLRmhzbzNCdHhXS29LQ2E5RUNrZWJtcE9EOTdNX0o3aTdTOTlUWlpMb3ZVOTZadDVnN1NuLUFIVEExakN4b2JUMmQtVFFabVBOTW9pSy1TemZvRGFTQ3NSNkQ5TGl6eUJVTUphRUJvd3dBUFhyZEl2X2pmQVMyR3V3eXJfeExXQVY2NGI3R1VRelhxanpwaWRGSHl2SVdnYk5EVkt4Z0pqNzFqcnBzUW1GUGdfVlZvS29kS2RPb3pOSjNaOWQ0Nmc3ZHVsaE5rTlM3YWtIMlpxOFRZbVh5Y2FjaHVZVlZYTWdDdENqTU5xLVgwZkpIVkdKUDI4dENacVBXNm9DNVY2RkhKekN6Y1FQV29tUElwLXg2Q01Mb19veWNGNWxuSWZLenhJaWk5MzhEeXJjWHJVRUhtR2pnTlRZTk9ZMEZSQzc1aElsbnB5dEQ4ekZ2a2FoekRHc3M1b1NHMUJ0WU5TZEd5VXRkV3dqZHI4U1RHVEE3WWE4UEczLUZJRmptV2NPUFA1dE1yOGRQUEk5N2pWV2Jtbjh4UEp0cUNtbnhtR1I2MkNtX3h1dlA4LWhHVnA1RTZ4QW1OWWpWbWhkVGtTazV2T25acmdxT1lPYlFCLU9VUy1ROTlCM3Y5ZkpxcnoxRHQxeHdBemwwYjhkQ003SGU3eXNYTTJwUHF6MjdrVG5tMW5ySU1ScmpzWEptZnFNbjRhZXBEaWI5T21ETkEwTmtUMWM1MEVwTjR3Q1ZHWkZJUE5kVTNTYmhnb2twbllJZEtaMlNGZGw0UkhMVEtoSy1McHVleWFOaU91UlNNc2NWUHhxSXh2MFVnMEE0bzc0TUthYjNwN0M3REhpeFhpd2hqVXZCNUdvTHlCalJmZVNiLURuQjFUOGcwZjN5eHJfTlowa0NsTGVZUHlWSllXaHdVSFQxTG9vekhIaTlCUzFib1ZUelczOUtfcDlZenUwajh1RmtWOE53TmxVSjFET2ZFYlMxMF9WbGRNS0FjR0JMYVQycjBKNGllYVdzRElKSDdWd04wVU5jek5oUTNEdXRsMlR2RExYdkFuS2V0cUZVdHJONlVYdWJvbE9NYVgzUVdLRWlrUUM1MUt1cm9tSS0tUWY4b1FFaGhQenN2cUVGVmtmZFpLQi1FUzA3bGk0cFVVaUZkajUyaUwzMWtqTXlkbFMyazlSLVFWTEo2bno2UWFrOHdFdzE2aklQQ25jXzlHSmtrcVlCMTAwZTRPYzhHLWd0dzRRSGdQOGpPWXBaZzRhOVhEX0t3V1U0bUlCVFBvaGRIR191ZF9TV1NZWUhwTlRaSjRUem5YejB6QndsV29FUlNfa3lqdGpvVUJWYzNyMnlIWks5NW5fV0NjMEhFcXFYWEtxV3N6M01feDVoY3Z4VkNfZnZhbWVzaWJBTERYOW5zXy1VSjFUMEk1QVQ1MG9YdndjN1ozcDdEamp3dElkZUxCa01QdXBLNzJCcG9ILUdkVl9MeHZkenYyRzR5Tk1mYzlMd2x6a2g3eUc0TEgwRmZRTm1oQVdUQnpVT3lkdnFIQloxUk1vWnB3MkxQVGhIZHMtanllXzlZVHpRaVZyUnhwQXJ2Y1RydWpORGxWSEtSMmFPWG8zTzJxeENzMldlcGJ2TGNZclVJTG5sR05OakMySEFIZEh3SndLTlBjZDVMODVELW9LM2QzVU1WN3I0aFd6ZlRid2tuWGF3RTM2OXlycjNXZVpFdDdlTzBEanV1S2Rqa3BnX0xpOEtYX2QydmVIdC1UZnBjNkFudWl1OXoxYWltdkR0dDd0T0ZoeW9JLTVqSFc0VHBLN0UtQkRYMHlYTExSdDhkdldGS21fX1N2WUVlTGg4LWVIMlBDc2pCSUo5UkxMcVJ1RF9EQWxvUDBjVU5tWm9HQ1FYX1ktR3Y4ZFBFN091RHhJV0gxQldJQklVb3l6Q1BrY1ZYeVRwOEc0NURYYUpzZ2k3LUNfekg2bXI3N3dnVmZBd1F4bFVEZ3NfQXY5bTRQaGIxY2xNLS1QNWFkTm9OM05oTDlWTGRSM3hxZUpZajNJN0VDVlRPbXZNc1lHckN1QWFjaTlrZjAzVkQ5Z2psZl9pQzVjeE1yRjJZSlBrNmVRd0hNUVlncm13bzZfZHZWYVlNaHZqaEN5NU1uOFo0X20wQjI5Qk5SbzlHdW1GdE9xbGFweVJITVRCbXM0N2RoejlHM01kTHlhLWhpNXNsMTJXaUllRUNfeUFRQXpVU0pXVm9Gc004R1VzQ3pZWFdHRTNzaWc0SVdZMjNBcWt1NjlKNDdkTC1iNUlUQ3hiNWx6ZHVDQnlTUHB0U2dHLUs2SnlUMFJCNnFfeVQtTDJVRkQ1bm5rby1uRGZZaGVHMmVzR3Z4UGJ3MldUUGZvNUpYdDhBU2xKX090UklvTWdrUEF5Wng4a3RCZ0F1bENwVl9yRGprV2FHdnpyNGdVYjdEc0NEWEo5LWNZWktYUGRPWGlhb011MVpvWW5OWGZCWTZTcWprM1llS1ROZHpZNVMyZU1USF9TRG5qaEtoZS1GWW03TkFvYUJWbGppcVNFczhqSHFJaGFoSWRfU2pLTGxiLW02eFBMN1QtUnlRQUROeUlUdFNFSDBEeDVUa2t3akV1NDlXWmZDcVJ1cXkyVUstZEoxZGNWYmxsRUsyczJWUW9OVWlIMGZCeGRUeXA=)
        CM_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmZnZjNqa3NKTnY5ekxBZHF6TVJwYUY5ZGQwS2lKS0p4bUVHcFpPQ1NyelhLaV9rMXhURlJaOTF5OU1XamxDWEo3a3NLcW1wYnYxWnJLc0xRUjJxbWFYa1FXS1E9PQ==)
        CM_KEY_ALIAS_PASSWORD: Encrypted(Z0FBQUFBQmZnZjNqNlVGWFNXaVBuWjF0U3Znc3VsVThicWI0QjNZY2tMdlZPZngzQjlyS0RQOWducW5PdlVqX3gxVmlndmhDOTB0V0ZDN0FvaDh4Uk83YjFIbnpUemhUZ2c9PQ==)
        CM_KEY_ALIAS_USERNAME: Encrypted(Z0FBQUFBQmZnZjNqTEUwdlVoVk9QcVZsMkxiVHVZQ1BpY2w3OVY3VUh0VC1wRGtTTTFyVWhYX2V3QlpCdWxkUDFTckNZaU9WcENHS3NFZ09TRVc4b1hXVFBaLThvcFk5ZEE9PQ==)
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - |
        # set up key.properties
        echo $CM_KEYSTORE | base64 --decode > /tmp/keystore.keystore
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$CM_KEYSTORE_PASSWORD
        keyPassword=$CM_KEY_ALIAS_PASSWORD
        keyAlias=$CM_KEY_ALIAS_USERNAME
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - cd . && flutter packages pub get
      - cd . && flutter build appbundle --release
      - find . -name "Podfile" -execdir pod install \;
      - cd . && flutter build ios --release --no-codesign
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - ashtonjonesdev@gmail.com
